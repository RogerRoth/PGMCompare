{"version":3,"sources":["components/TableItem/index.js","page/home/index.js","index.js"],"names":["TableItem","props","useEffect","xTRs","data","id","column","line","dataIndex","xTable","document","getElementById","innerHTML","i","appendChild","createElement","j","xTD","setAttribute","createTextNode","className","App","useState","previewImg","setPreviewImg","previewImgB","setPreviewImgB","previewCompared","setPreviewCompared","compareDataResult","setCompareDataResult","sliderValue","setSliderValue","handleFile","e","content","target","result","split","col","lin","splice","table","timeStamp","handleChangeFile","file","image","fileData","FileReader","onloadend","readAsText","compareImages","param","resultView","refData","compData","length","push","dataCompare","alert","tolerancia","totalPx","pxMesmaPos","diferenca","finalResult","semelhanca","class","type","min","max","value","onChange","alt","src","accept","files","onClick","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.6d54eac2.chunk.js","sourcesContent":["import { useEffect } from \"react\";\r\n\r\nimport \"./styles.css\";\r\n\r\nexport default function TableItem(props) {\r\n    \r\n    useEffect(() => {\r\n\r\n        const {id, data, column, line} = props.data;\r\n\r\n        let dataIndex = 0;\r\n        let xTRs;\r\n        let xTable = document.getElementById(id);\r\n        xTable.innerHTML = '';\r\n\r\n        for (let i = 0; i < line; i++) {\r\n            xTable.appendChild(xTRs = document.createElement(\"tr\"));\r\n            for (let j = 0; j < column; j++) {\r\n                let xTD = document.createElement(\"td\");\r\n                xTD.setAttribute('class', 'c'+data[dataIndex]);\r\n\r\n                xTD.appendChild(document.createTextNode(''));\r\n                \r\n                xTRs.appendChild(xTD);\r\n                dataIndex++;\r\n            }\r\n        }\r\n    }, [props]);\r\n\r\n    return(\r\n        <>\r\n            <table className=\"table-item\" id={props.data.id}></table>\r\n\r\n        </>\r\n    )\r\n}","import { useState } from 'react';\nimport \"./styles.css\";\n\nimport TableItem from '../../components/TableItem';\n\nfunction App() {\n  const [previewImg, setPreviewImg] = useState();\n  const [previewImgB, setPreviewImgB] = useState();\n\n  const [previewCompared, setPreviewCompared] = useState();\n  const [compareDataResult, setCompareDataResult] = useState();\n\n  const [sliderValue, setSliderValue] = useState(15);\n\n  const handleFile = (e) => {\n    let content = e.target.result;\n    content = content.split(/\\r\\n|\\n/);\n    const [ col, lin ] = content[2].split(' ');\n    content.splice(0, 3);\n\n    const table = {\n      id: e.timeStamp,\n      data: content,\n      column: col,\n      line: lin,\n    }\n\n    if(e.target.id === 'orig'){\n      setPreviewImg(table);\n    } else if(e.target.id === 'comp'){\n      setPreviewImgB(table);\n    }\n  }\n  \n  const handleChangeFile = (file, image) => {\n    if(!file){\n      \n      return\n    }\n    let fileData = new FileReader();\n    fileData.id = image\n    fileData.onloadend = handleFile;\n    fileData.readAsText(file);\n  }\n\n\n  const compareImages = ((param) => {\n\n    if(!previewImg || !previewImgB){\n      alert('Não há imagens selecionadas, por favor defina a imagem de referência e comparativa')\n      return;\n    }\n\n    const resultView = {\n      id: 'result',\n      data: [],\n      column: previewImg.column,\n      line: previewImg.line,\n    }\n\n    const refData = previewImg.data;\n    const compData = previewImgB.data;\n\n    if(param === 'equal'){\n      for(let i=0; i<refData.length; i++){\n        if(refData[i] === compData[i]){\n          resultView.data.push(refData[i]);\n        }\n        else{\n          resultView.data.push('255');\n        }\n      }\n    }\n\n    if(param === 'dif'){\n      for(let i=0; i<refData.length; i++){\n        if(refData[i] !== compData[i]){\n          resultView.data.push('0');\n        }\n        else{\n          resultView.data.push('255');\n          \n        }\n      }\n    }\n\n    if(param === 'alt'){\n      \n      for(let i=0; i<refData.length; i++){\n        if(refData[i] === compData[i]){\n          resultView.data.push(refData[i]);\n        }\n        else{\n          resultView.data.push('255');\n        }\n      }\n\n      for(let i=0; i<refData.length; i++){\n        if(refData[i] !== resultView.data[i]){\n          resultView.data[i] = '150'; //vermelho\n        }\n      }\n\n      \n\n      for(let i=0; i<refData.length; i++){\n        if(compData[i] !== resultView.data[i]){\n\n          if(resultView.data[i] !== '150'){\n            resultView.data[i] = '50'; //azul\n          }\n          \n        }\n      }\n    }\n\n    setPreviewCompared(resultView);\n\n    dataCompare();\n  })\n\n  const dataCompare = (() => {\n\n    const tolerancia = sliderValue;\n\n    const totalPx = previewImg.data.length;\n    //const blackPxOrig = previewImg.data.filter(px => px ==='0').length;\n    //const blackPxComp = previewImgB.data.filter(px => px ==='0').length;\n\n    //const porcentagemIgualdade = (blackPxOrig/blackPxComp) * 100\n\n\n    const refData = previewImg.data;\n    const compData = previewImgB.data;\n\n    let pxMesmaPos = 0;\n\n    for(let i=0; i<refData.length; i++){\n      if(refData[i] === compData[i]){\n        pxMesmaPos++;\n      }\n    }\n\n    const semelhanca = (pxMesmaPos/totalPx)*100;\n    let diferenca = (1-(pxMesmaPos/totalPx))*100;\n\n    let finalResult = false;\n\n    if(diferenca <= tolerancia){\n      finalResult = true;\n    }\n\n    const compareDataResult = {\n      totalPx,\n      semelhanca,\n      diferenca,\n      tolerancia,\n      finalResult\n    }\n    setCompareDataResult(compareDataResult)\n  })\n\n  const handleSlideChange = ((e) => {\n    setSliderValue(e.target.value);\n  })\n\n  return (\n    <div className=\"container\">\n      <h1 className=\"title is-2 has-text-centered my-6\" >Comparador .pgm</h1>\n\n      \n      <div class=\"block subtitle is-5 has-text-centered\">\n        Comparador de arquivos <em>.pgm</em>, a partir de uma imagem de referência é verificado a semelhança à outro arquivo <em>.pgm</em>.\n      </div>\n\n      <div className=\"container has-text-centered m-5\">\n      <div class=\"block subtitle is-5\">\n        <strong>Como funciona:</strong>\n      </div>\n      <div class=\"block subtitle is-5 \">\n        <strong>1) </strong>defina a tolerância, no qual um arquivo é considerado semelhante ao outro.\n      </div>\n      <div class=\"block subtitle is-5\">\n        <strong>2) </strong>selecione o arquivo de referência.\n      </div>\n      <div class=\"block subtitle is-5\">\n        <strong>3) </strong>selecione o arquivo que será comparado com o de referência.\n      </div>\n      <div class=\"block subtitle is-5\">\n        <strong>4) </strong>aplique um dos filtros <em>Igualdade</em>, <em>Diferença</em> ou <em>Alt</em> (<span class=\"tag is-info\"></span> pixel adicionado, <span class=\"tag is-danger\"></span> pixel removido, <span class=\"tag is-black\"></span> pixel igual).\n      </div>\n      </div>\n\n\n      <div className=\"container has-text-centered m-5\">\n        <p className=\"title is-4\">Tolerância</p>\n        \n      \n        <input type=\"range\" min={0} max={100} value={sliderValue} className=\"slider\" onChange={handleSlideChange} />\n        <p className=\"subtitle\">{sliderValue}%</p>\n      </div>\n      \n      <div className=\"columns box has-text-centered\">\n\n        <div className=\"column is-one-third\">\n          <p className=\"title is-4\">Referência</p>\n          {previewImg ?  <TableItem data={previewImg}/>\n            : <img alt=\"Temp\" src=\"https://bulma.io/images/placeholders/256x256.png\"></img>\n          }\n            <input className=\"button\" type=\"file\" accept=\"image/pgm\" onChange={e => handleChangeFile(e.target.files[0], 'orig')}></input>  \n        </div>\n\n        <div className=\"column is-one-third\">\n          <p className=\"title is-4\">Comparativa</p>\n\n          {previewImgB ? <TableItem data={previewImgB}/>\n            : <img alt=\"Temp\" src=\"https://bulma.io/images/placeholders/256x256.png\"></img>\n          }\n  \n          <input className=\"button\" type=\"file\" accept=\"image/pgm\" onChange={e => handleChangeFile(e.target.files[0], 'comp')}></input>\n        </div>\n\n        <div className=\"column is-one-third\">\n          <p className=\"title is-4\">Resultado</p>\n\n          {previewCompared ? <TableItem data={previewCompared}/>\n            : <img alt=\"Temp\" src=\"https://bulma.io/images/placeholders/256x256.png\"></img>\n          }\n\n          <div className=\"buttons\">\n            <button className=\"button is-success\" id=\"equal\" onClick={() => {compareImages(\"equal\")}}>Igualdade</button>\n\n            <button className=\"button is-danger\" id=\"dif\" onClick={() => {compareImages(\"dif\")}}>Diferença</button>\n\n            <button className=\"button is-info\" id=\"dif\" onClick={() => {compareImages(\"alt\")}}>Alt</button>\n          </div>\n        </div>\n      </div>\n\n      \n\n      <div className=\"has-text-centered mb-5 mx-5\">\n\n        {compareDataResult && (\n          <div className=\"box\">\n            <p>\n              {compareDataResult.finalResult ? <span className=\"tag is-success is-large\">Imagem Igual</span> : <span className=\"tag is-danger is-large\">Imagem Diferente</span>}<br/>\n\n              <strong>Tolerâcia </strong>{compareDataResult.tolerancia}%<br/>\n              <strong>Semelhança </strong>{compareDataResult.semelhanca}%<br/>\n              <strong>Total de Pixels </strong>{compareDataResult.totalPx}\n            </p>\n\n\n            </div>\n          )}\n      </div>\n      \n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n//import './index.css';\nimport Home from './page/home';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Home />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}